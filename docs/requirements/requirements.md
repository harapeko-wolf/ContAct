# ContAct 要件定義書

## 1. プロジェクト概要

### 1.1 目的
- 資料請求リードを商談化するためのPDFコンテンツ配信ツールの開発
- PDFの閲覧状況を可視化し、ユーザーの関心度に応じて商談予約を促す
- 温度感の低い見込み顧客を効率的に商談へ誘導

### 1.2 対象ユーザー
- 営業担当者（管理画面利用者）
- 見込み顧客（PDF閲覧者）

## 2. 機能要件

### 2.1 コンテンツ共有機能
- PDFファイルのアップロードと管理
- 顧客ごとの専用URL生成（UUIDベース）
- PDFのスライド形式での表示
- 閲覧制限（特定の顧客のみアクセス可能）

### 2.2 閲覧ログ機能
- ページごとの閲覧時間記録
- 総閲覧時間の記録
- 複数回閲覧の検出
- 最終ページ到達の検出

### 2.3 商談予約機能
- TimeRex連携による予約ページへの誘導
- 予約完了状態の管理
- 予約モーダルの表示制御

### 2.4 管理画面機能
- 顧客情報管理
- PDFファイル管理
- 閲覧ログの可視化
- 商談スコアの表示
- 予約状況の管理

## 3. 非機能要件

### 3.1 セキュリティ要件
- 顧客情報の保護
- PDFファイルのアクセス制御
- 認証・認可の実装
- データの暗号化

### 3.2 パフォーマンス要件
- PDF表示の高速化
- 閲覧ログのリアルタイム記録
- スコア計算の効率化

### 3.3 可用性要件
- 24時間365日の稼働
- バックアップとリストア機能
- 障害時の自動復旧

### 3.4 運用要件
- 監視・アラート機能
- ログ管理
- バックアップ戦略

## 4. 制約条件

### 4.1 技術的制約
- フロントエンド: Next.js 15 + TypeScript
- バックエンド: Laravel 12 + PHP 8.4
- データベース: MySQL 8.4
- インフラ: Docker Compose, AWS

### 4.2 ビジネス制約
- TimeRexとの連携必須
- 顧客情報の保護必須
- 閲覧ログの正確な記録必須

## 5. スコアリング要件

### 5.1 スコア計算基準
| 指標                   | 条件例                        | 点数   |
|------------------------|-------------------------------|--------|
| 閲覧ページ数           | 全体の80%以上                 | +30点  |
| 総閲覧時間             | 60秒以上                      | +20点  |
| 特定ページの滞在時間   | 1ページあたり平均10秒以上     | +10点  |
| 同一資料の複数回閲覧   | 2回以上アクセス               | +20点  |
| 最終ページ到達         | 到達済み                      | +20点  |

### 5.2 スコア判定基準
- 70点以上: 期待度高（商談予約を促す）
- 50-69点: 期待度中（フォローアップ対象）
- 50点未満: 期待度低（継続観察）

## 6. インターフェース要件

### 6.1 外部システム連携
- TimeRex API連携
- 予約完了時のリダイレクト処理

### 6.2 ユーザーインターフェース
- 管理画面: ダッシュボード形式
- PDF閲覧画面: シンプルなスライド表示
- モーダル: 予約誘導用

## 7. データ要件

### 7.1 データ構造
- 顧客情報
- PDFファイル情報
- 閲覧ログ
- 予約情報

### 7.2 データ保持期間
- 顧客情報: 契約終了後1年
- 閲覧ログ: 1年
- PDFファイル: 無期限

## 8. テスト要件

### 8.1 テスト範囲
- 機能テスト
- セキュリティテスト
- パフォーマンステスト
- ユーザビリティテスト

### 8.2 テスト環境
- 開発環境
- ステージング環境
- 本番環境 